{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst path = require(\"path\");\nconst DescriptionFileUtils = require(\"./DescriptionFileUtils\");\n\n/** @typedef {import(\"./Resolver\")} Resolver */\n/** @typedef {import(\"./Resolver\").ResolveStepHook} ResolveStepHook */\n/** @typedef {{name: string|Array<string>, forceRelative: boolean}} MainFieldOptions */\n\nconst alreadyTriedMainField = Symbol(\"alreadyTriedMainField\");\nmodule.exports = class MainFieldPlugin {\n  /**\n   * @param {string | ResolveStepHook} source source\n   * @param {MainFieldOptions} options options\n   * @param {string | ResolveStepHook} target target\n   */\n  constructor(source, options, target) {\n    this.source = source;\n    this.options = options;\n    this.target = target;\n  }\n\n  /**\n   * @param {Resolver} resolver the resolver\n   * @returns {void}\n   */\n  apply(resolver) {\n    const target = resolver.ensureHook(this.target);\n    resolver.getHook(this.source).tapAsync(\"MainFieldPlugin\", (request, resolveContext, callback) => {\n      if (request.path !== request.descriptionFileRoot || request[alreadyTriedMainField] === request.descriptionFilePath || !request.descriptionFilePath) return callback();\n      const filename = path.basename(request.descriptionFilePath);\n      let mainModule = DescriptionFileUtils.getField(request.descriptionFileData, this.options.name);\n      if (!mainModule || typeof mainModule !== \"string\" || mainModule === \".\" || mainModule === \"./\") {\n        return callback();\n      }\n      if (this.options.forceRelative && !/^\\.\\.?\\//.test(mainModule)) mainModule = \"./\" + mainModule;\n      const obj = {\n        ...request,\n        request: mainModule,\n        module: false,\n        directory: mainModule.endsWith(\"/\"),\n        [alreadyTriedMainField]: request.descriptionFilePath\n      };\n      return resolver.doResolve(target, obj, \"use \" + mainModule + \" from \" + this.options.name + \" in \" + filename, resolveContext, callback);\n    });\n  }\n};","map":{"version":3,"names":["path","require","DescriptionFileUtils","alreadyTriedMainField","Symbol","module","exports","MainFieldPlugin","constructor","source","options","target","apply","resolver","ensureHook","getHook","tapAsync","request","resolveContext","callback","descriptionFileRoot","descriptionFilePath","filename","basename","mainModule","getField","descriptionFileData","name","forceRelative","test","obj","directory","endsWith","doResolve"],"sources":["C:/Users/mahmutcolak/Desktop/rick-and-morty/node_modules/enhanced-resolve/lib/MainFieldPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst path = require(\"path\");\nconst DescriptionFileUtils = require(\"./DescriptionFileUtils\");\n\n/** @typedef {import(\"./Resolver\")} Resolver */\n/** @typedef {import(\"./Resolver\").ResolveStepHook} ResolveStepHook */\n/** @typedef {{name: string|Array<string>, forceRelative: boolean}} MainFieldOptions */\n\nconst alreadyTriedMainField = Symbol(\"alreadyTriedMainField\");\n\nmodule.exports = class MainFieldPlugin {\n\t/**\n\t * @param {string | ResolveStepHook} source source\n\t * @param {MainFieldOptions} options options\n\t * @param {string | ResolveStepHook} target target\n\t */\n\tconstructor(source, options, target) {\n\t\tthis.source = source;\n\t\tthis.options = options;\n\t\tthis.target = target;\n\t}\n\n\t/**\n\t * @param {Resolver} resolver the resolver\n\t * @returns {void}\n\t */\n\tapply(resolver) {\n\t\tconst target = resolver.ensureHook(this.target);\n\t\tresolver\n\t\t\t.getHook(this.source)\n\t\t\t.tapAsync(\"MainFieldPlugin\", (request, resolveContext, callback) => {\n\t\t\t\tif (\n\t\t\t\t\trequest.path !== request.descriptionFileRoot ||\n\t\t\t\t\trequest[alreadyTriedMainField] === request.descriptionFilePath ||\n\t\t\t\t\t!request.descriptionFilePath\n\t\t\t\t)\n\t\t\t\t\treturn callback();\n\t\t\t\tconst filename = path.basename(request.descriptionFilePath);\n\t\t\t\tlet mainModule = DescriptionFileUtils.getField(\n\t\t\t\t\trequest.descriptionFileData,\n\t\t\t\t\tthis.options.name\n\t\t\t\t);\n\n\t\t\t\tif (\n\t\t\t\t\t!mainModule ||\n\t\t\t\t\ttypeof mainModule !== \"string\" ||\n\t\t\t\t\tmainModule === \".\" ||\n\t\t\t\t\tmainModule === \"./\"\n\t\t\t\t) {\n\t\t\t\t\treturn callback();\n\t\t\t\t}\n\t\t\t\tif (this.options.forceRelative && !/^\\.\\.?\\//.test(mainModule))\n\t\t\t\t\tmainModule = \"./\" + mainModule;\n\t\t\t\tconst obj = {\n\t\t\t\t\t...request,\n\t\t\t\t\trequest: mainModule,\n\t\t\t\t\tmodule: false,\n\t\t\t\t\tdirectory: mainModule.endsWith(\"/\"),\n\t\t\t\t\t[alreadyTriedMainField]: request.descriptionFilePath\n\t\t\t\t};\n\t\t\t\treturn resolver.doResolve(\n\t\t\t\t\ttarget,\n\t\t\t\t\tobj,\n\t\t\t\t\t\"use \" +\n\t\t\t\t\t\tmainModule +\n\t\t\t\t\t\t\" from \" +\n\t\t\t\t\t\tthis.options.name +\n\t\t\t\t\t\t\" in \" +\n\t\t\t\t\t\tfilename,\n\t\t\t\t\tresolveContext,\n\t\t\t\t\tcallback\n\t\t\t\t);\n\t\t\t});\n\t}\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMC,oBAAoB,GAAGD,OAAO,CAAC,wBAAwB,CAAC;;AAE9D;AACA;AACA;;AAEA,MAAME,qBAAqB,GAAGC,MAAM,CAAC,uBAAuB,CAAC;AAE7DC,MAAM,CAACC,OAAO,GAAG,MAAMC,eAAe,CAAC;EACtC;AACD;AACA;AACA;AACA;EACCC,WAAWA,CAACC,MAAM,EAAEC,OAAO,EAAEC,MAAM,EAAE;IACpC,IAAI,CAACF,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,MAAM,GAAGA,MAAM;EACrB;;EAEA;AACD;AACA;AACA;EACCC,KAAKA,CAACC,QAAQ,EAAE;IACf,MAAMF,MAAM,GAAGE,QAAQ,CAACC,UAAU,CAAC,IAAI,CAACH,MAAM,CAAC;IAC/CE,QAAQ,CACNE,OAAO,CAAC,IAAI,CAACN,MAAM,CAAC,CACpBO,QAAQ,CAAC,iBAAiB,EAAE,CAACC,OAAO,EAAEC,cAAc,EAAEC,QAAQ,KAAK;MACnE,IACCF,OAAO,CAACjB,IAAI,KAAKiB,OAAO,CAACG,mBAAmB,IAC5CH,OAAO,CAACd,qBAAqB,CAAC,KAAKc,OAAO,CAACI,mBAAmB,IAC9D,CAACJ,OAAO,CAACI,mBAAmB,EAE5B,OAAOF,QAAQ,EAAE;MAClB,MAAMG,QAAQ,GAAGtB,IAAI,CAACuB,QAAQ,CAACN,OAAO,CAACI,mBAAmB,CAAC;MAC3D,IAAIG,UAAU,GAAGtB,oBAAoB,CAACuB,QAAQ,CAC7CR,OAAO,CAACS,mBAAmB,EAC3B,IAAI,CAAChB,OAAO,CAACiB,IAAI,CACjB;MAED,IACC,CAACH,UAAU,IACX,OAAOA,UAAU,KAAK,QAAQ,IAC9BA,UAAU,KAAK,GAAG,IAClBA,UAAU,KAAK,IAAI,EAClB;QACD,OAAOL,QAAQ,EAAE;MAClB;MACA,IAAI,IAAI,CAACT,OAAO,CAACkB,aAAa,IAAI,CAAC,UAAU,CAACC,IAAI,CAACL,UAAU,CAAC,EAC7DA,UAAU,GAAG,IAAI,GAAGA,UAAU;MAC/B,MAAMM,GAAG,GAAG;QACX,GAAGb,OAAO;QACVA,OAAO,EAAEO,UAAU;QACnBnB,MAAM,EAAE,KAAK;QACb0B,SAAS,EAAEP,UAAU,CAACQ,QAAQ,CAAC,GAAG,CAAC;QACnC,CAAC7B,qBAAqB,GAAGc,OAAO,CAACI;MAClC,CAAC;MACD,OAAOR,QAAQ,CAACoB,SAAS,CACxBtB,MAAM,EACNmB,GAAG,EACH,MAAM,GACLN,UAAU,GACV,QAAQ,GACR,IAAI,CAACd,OAAO,CAACiB,IAAI,GACjB,MAAM,GACNL,QAAQ,EACTJ,cAAc,EACdC,QAAQ,CACR;IACF,CAAC,CAAC;EACJ;AACD,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}